<!DOCTYPE html>
<html>
    <head>
	     <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    </head>

    <body>

	<script>
		function check_form()
		{
			alert($('#username').val());
			alert($('#password').val());
			return true;
		}
	</script>


	<script>
		function newUserClicked()
		{
			alert("New User Created");
			return true;
		}
	</script>


	<script>
		function addUserClicked()
		{
			$('#login').hide();
			$('#addNewUser').show();
			return true;
		}
	</script>


	<script>
		function loginClicked()
		{
			$.ajax({
				type: "POST",
				url: "/userAuth",
				data: $("#loginForm").serialize(),
				success: function(data)
				{
					$('#login').hide();
					$('#books').show();
					showBooks;
				}
			});
		}
	</script>



	<script>
		function showBooks()
		{
			$.ajax({
				type: "GET",
				url: "/getBooks",
				success:function(data)
				{
					for(var i = 0; i < data.name.length; i++)
					{
						$('#bookList').append($('<option>', {value: data.name[i], text: 'Title: ' + data.name[i] + ' Price: $' + data.price[i]}));
					}
					alert("All books listed");
				}
			});
		}
	</script>


	<script>
		function purchaseBookClicked()
		{

			alert("Thank you for buying a book");

			//Get name of currently selected book
			var e = document.getElementById('bookList');
			var strBook = e.options[e.selectedIndex].value;


			$.ajax({
				type:"POST",
				url: "/purchaseBook",
				data: {book: strBook},
				success: function(data)
				{
					if(data.status == null)
						alert("There was an error in making your purchase");
				}
			});
		}
	</script>


	
	<div id="login">
		<form id="loginForm">
			<label for="username">Username:</label><br>
			<input type="text" id="username" name="username" value="JP"><br>
			<label for="password">Password:</label><br>
			<input type="password" id="password" name="password" value="Password"><br><br>
			<input type="button" value="Login" id="Login" onclick="return loginClicked();">
			<input type="button" value="Create New User" onclick="return addUserClicked();">
		</form>
	</div>

	<div id="addNewUser" style = "display:none">
		<form action = "/createNewUser" methl><br>
			<input type="text" id="username" name="username" value="JP"><br>
			<label for="password">New Password:</label><br>
			<input type="password" id="password" name="password" value="Password"><br><br>
			<input type="submit" value="Submit" onclick="return newUserClicked();">
		</form>
	</div>

	<div id="books" style="display:none">
		<form id="bookDisplay">
			<h1>Buy me</h1>
			<select name="bookList" id="bookList"></select><br>
			<input type="button" value="Purchase Book" id="purchaseButton" onclick="return purchaseBookClicked();">	
		</form>
	</div>


   </body>
</html>
